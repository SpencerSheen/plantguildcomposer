{% extends 'frontend/sidebar-editplant.html' %}

{% block title %}{% spaceless %}

	{% if common_name %}
		{{ common_name }}
	{% else %}
		{% if genus %}
			{{ genus }}&nbsp;
		{% endif %}
		{% if species %}
			{{ species }}&nbsp;
		{% endif %}
		{% if variety %}
			{{ variety }}
		{% endif %}
	{% endif %}
{% endspaceless %}{% endblock %}

{% block maincontent %}

{% if result %}	
	<div id="hiddenPlantId" style="visibility:hidden;">{{plantId}}</div>
	<div class="row editplantrow">
		<div class="col-sm-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div class="col-sm-11">
			<div class="edit-plant-title name">{% spaceless %}
				<div class="name" id="genus">
					{% if genus %}
						{{ genus }}
					{% endif %}
				</div>
				<div class="name" id="species">
					{% if species %}
						{{ species }}
					{% endif %}
				</div>
				<div class="name" id="variety">
					{% if variety %}
						{{ variety }}
					{% endif %}
				</div>
			</div>
			<div class="edit-plant-title name italic">
				<div class="name" id="commonName">
					{% if common_name %}
					{{ common_name }}
				{% endif %}
				</div>
			</div> 
			<br>
			<div class="edit-plant-subtitle name">
				<div class="name" id="family">
				{% if family %}
					{{ family }}
				{% endif %}
				</div>
			</div>
			<div class="edit-plant-subtitle name italic">
				<div class="name" id="familyCommonName">{% if family_common_name %}
					{{ family_common_name }}
				{% endif %}
				</div>
			</div>
			{% endspaceless %}
			<br>
			{% if endemic_status %}
				<div>Endemic Status: <p id="endemicStatus">{{ endemic_status }}</p></div>
			{% endif %}
		</div>
	</div>

	<div class="row editplantrow">
		<div class="col-sm-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div id="plant-images" class="col-sm-11">
			<!--<a href="#"></a>-->
			<img src="http://grandaspirations.org/wp-content/uploads/2010/11/growing-plant.jpg" class='cardimg' alt="Plant Image" />
			<img src="http://grandaspirations.org/wp-content/uploads/2010/11/growing-plant.jpg" class='cardimg' alt="Plant Image" />
			<img src="http://grandaspirations.org/wp-content/uploads/2010/11/growing-plant.jpg" class='cardimg' alt="Plant Image" />
			<div id ="add-new-img" src="" class="cardimg"/><div id="add-new-img2"><div>+ add new</div></div></div>
		</div>
	</div>
	<div class="row editplantrow">
		<div class="col-sm-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div class="col-sm-5" id="characteristics-block">
			<div class="row italic attribute"><span class="glyphicon glyphicon-plus add-att-btn" id="characteristics" aria-hidden="true"></span>Characteristics</div>
			{% for f in result.Characteristics %}
			{% if f.value %}
			<div class="row">
				<div class="col-xs-4 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div>
					<div class="col-xs-8 bold">{{ f.value }}</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
		<div class="col-sm-6" id="needs-block">
			<div class="row italic attribute"><span class="glyphicon glyphicon-plus add-att-btn" aria-hidden="true"></span>Needs</div>
			{% for f in result.Needs %}
			{% if f.value %}
			<div class="row">
				<div class="col-xs-4 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div>
					<div class="col-xs-8 bold">{{ f.value }}</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
	</div>
	<div class="row editplantrow">
		<div class="col-sm-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div class="col-sm-5" id="tolerances-block">
			<div class="row italic attribute"><span class="glyphicon glyphicon-plus add-att-btn" aria-hidden="true"></span>Tolerances</div>
			{% for f in result.Tolerances %}
			{% if f.value %}
			<div class="row">
				<div class="col-xs-4 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-8 bold">{{ f.value }}</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
		<div class="col-sm-6" id="behaviors-block">
			<div class="row italic attribute"><span class="glyphicon glyphicon-plus add-att-btn" aria-hidden="true"></span>Behaviors</div>
			{% for f in result.Behaviors %}
			{% if f.value %}
			<div class="row">
				<div class="col-xs-4 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
				<div class="col-xs-8 bold">{{ f.value }}</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
	</div>
	<div class="row editplantrow">
		<div class="col-sm-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div class="col-sm-5" id="products-block">
			<div class="row italic attribute"><span class="glyphicon glyphicon-plus add-att-btn" aria-hidden="true"></span>Products</div>
			{% for f in result.Products %}
			{% if f.value %}
			<div class="row">
				<div class="col-xs-4 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
				<div class="col-xs-8 bold">{{ f.value }}</div>
			</div>
			{% endif %}
			{% endfor %}
		</div>
		<div class="col-sm-6"></div>
	</div>

	<!--################### ADDING NEW ATTRIBUTES ########################### -->

	<div class="row editplantrow">
		<div class="col-md-1"></div> <!--EMPTY DIV OR OFFSET? -->
		<div class="col-md-2">
			<div class="add-attribute-container"><div class="add-attribute-center">+ add new characteristic</div>
			<div class="undefined-attributes">
				{% for f in result.Characteristics %}
				{% if not f.value %}
				<div class="row">
					<div class="col-xs-10 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-2 bold" style="visibility:hidden;">undefined</div>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="add-attribute-container"><div class="add-attribute-center">+ add new need</div>
			<div class="undefined-attributes">
				{% for f in result.Needs %}
				{% if not f.value %}
				<div class="row">
					<div class="col-xs-10 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-2 bold" style="visibility:hidden;">undefined</div>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="add-attribute-container"><div class="add-attribute-center">+ add new tolerance</div>
			<div class="undefined-attributes">
				{% for f in result.Tolerances %}
				{% if not f.value %}
				<div class="row">
					<div class="col-xs-10 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-2 bold" style="visibility:hidden;">undefined</div>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="add-attribute-container"><div class="add-attribute-center">+ add new behavior</div>
			<div class="undefined-attributes">
				{% for f in result.Behaviors %}
				{% if not f.value %}
				<div class="row">
					<div class="col-xs-10 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-2 bold" style="visibility:hidden;">undefined</div>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			</div>
		</div>
		<div class="col-md-2">
			<div class="add-attribute-container"><div class="add-attribute-center">+ add new product</div>
			<div class="undefined-attributes">
				{% for f in result.Products %}
				{% if not f.value %}
				<div class="row">
					<div class="col-xs-10 italic edit-attribute" id="{{f.name}}" data-fieldType="{{f.field_type}}" data-className="{{ f.class_name }}">{{ f.label }}</div> 
					<div class="col-xs-2 bold" style="visibility:hidden;">undefined</div>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			</div>
		</div>
		<div class="col-md-1">
		</div>

	</div>
	
{% else %}
	<p>No plant</p> <!--fancy this up a bit-->
{% endif %}

{% endblock %}

{% block script %}
{% load staticfiles %}
<script src="{% static 'frontend/editplant.js' %}" type="text/javascript"></script>
<script type="text/javascript">
	var common_name, genus, species, variety;
	common_name = "{{ plant.common_name }}";
	genus = "{{ plant.genus }}";
	species = "{{ plant.species }}";
	variety = "{{ plant.variety }}";

	//alert("Initializing plant in editplant.html " + common_name + " " + genus + " " + species + " " + variety);
	EditPlant.init(common_name, genus, species, variety);
</script>

{% endblock %}